<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>Example</title>
</head>

<body>
	<div id="root">
		<script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
		<script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>

		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

		<script type="text/babel">

			{/* function Component(props) {
				return (
					<div>
						<h1>{props.message}</h1>
					</div>
					)
			}

			Component.defaultProps = {
				message="기본값"
			} */}

			{/* class Component extends React.Component {
				// state = {
				// 	count: 0,
				// }
				constructor(props) {
					super(props);

					this.state = {
						count : 0
					}
				}

				render() {
					return (
						<div>
							<h1>
								{this.props.message} 이것은 함수로 만든 컴포넌트입니다.
							</h1>
							<p>{this.state.count}</p>
						</div>
					)
				}
				componentDidMount() {
					setTimeout(() => {
						// this.setState({
						// 	count: this.state.count + 1,
						// });
						this.ListeningStateChangedEvent((previousState) => {
							const newState = {count: previousState.count + 1}
							return newState
						})
					}, 1000)
				}

				static defaultProps = {
					message: "기본값"
				}
			} */}

			{/* ReactDOM.render(
			<Component message="안녕하세요!!!"/>, 
			document.querySelector('#root')
			) */}

			{/* function Component() {
				return <div><button onClick={() => {
					console.log('clicked')
				}}>클릭</button></div>
			} */}

			{/* class Component extends React.Component {
				state = {
					count: 0
				}
				// constructor(props) {
				// 	super(props)
				// 	this.click = this.click.bind(this)
				// }
				render() {
					return (
						<div>
						<p>{this.state.count}</p>
						<button onClick={this.click}>
							클릭
						</button>
					</div>
					)
				}
				click = () =>{
					console.log('clicked')
					this.setState((state) => ({
						...state,
						count:state.count + 1,
					}))
				}
			}

			ReactDOM.render(<Component />, document.querySelector('#root')) */}

			/*class App extends React.Component {
				state = {
					age: 39,
				}
				constructor(props) {
					super(props)
					console.log('constructor', props)
				}
				interval = null
				render() {
					console.log('render')
					return (
						<div>
							<h2>
								Hello {this.props.name} - {this.state.age}
							</h2>
						</div>
					)
				}*/
				/*componentWillMount() {
					console.log('componentWillMount')
				}*/

				/*static getDerivedStateFromProps(nextProps, prevState) {
					console.log('getDerivedStateFromProps', nextProps, prevState)

					return {
						age:340
					}
				}*/

				/*componentDidMount() {
					console.log('componentDidMount')

					this.interval = setInterval(() => {
						console.log('setInterval')
						this.setState(state => ({... state, age: state.age + 1}))
					}, 1000)
				}*/

				// Component props, state 변경
				/*componentWillReceiveProps(nextProps) {
					console.log("componentWillReceiveProps", nextProps)
				}*/

				
				/*shouldComponentUpdate(nextProps, nextState) {
					console.log('shouldComponentUpdate', nextProps, nextState)

					return (true)
				}*/
				/*componentWillUpdate(nextProps, nextState) {
					console.log('componentWillUpdate', nextProps, nextState)
				}*/
				/*componentDidUpdate(prevProps, prevState) {
					console.log('componentDidUpdate', prevProps, prevState)
				}*/
				/*componentWillUnmount() {
					clearInterval(this.interval)
				}*/
			//}

			/*let i = 0
			class App extends React.Component {
				state = {list : []}

				render() {
					return (
						<div id = "list" style={{height:100, overflow:"scroll"}}>
							{this.state.list.map(i => {
								return (
									<div>{i}</div>
								)
							})}
						</div>
					)
				}

				componentDidMount() {
					setInterval(() => {
						this.setState(state => ({
							list: [... state.list, i++]
						}))
					}, 1000)
				}

				getSnapshotBeforeUpdate(prevProps, prevState) {
					if (prevState.list.length === this.state.list.length) return (null)
					const list = document.querySelector('#list')
					return (list.scrollHeight - list.scrollTop)
				}

				componentDidUpdate(prevProps, prevState, snapshot) {
					console.log(snapshot)
					if (snapshot === null) return;
					const list = document.querySelector('#list')
					list.scrollTop = list.scrollHeight - snapshot
				}
			}*/

			class App extends React.Component {
				state = {
					hasError: false
				}
				render() {
					if (this.state.hasError) {
						return (
							<div>예상치 못한 에러가 발생했다.</div>
						)
					} else {
						return (
							<WevService />
						)
					}
				}

				componentDidCatch(error, info) {
					this.setState({hasError: true})
				}
			}

			
			ReactDOM.render(<App name="Mark" />, document.querySelector('#root'))
		</script>
	</div>

</body>

</html>